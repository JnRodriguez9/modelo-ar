<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Test - Centrar Modelo 3D</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      body { margin: 0; overflow: hidden; background-color: #000; }
      #loading {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-family: sans-serif;
      }
    </style>
  </head>

  <body>
    <div id="loading">Cargando modelo...</div>

    <a-scene background="color: #ccc" embedded>
      <!-- Luz ambiental y direccional -->
      <a-entity light="type: ambient; intensity: 2"></a-entity>
      <a-entity light="type: directional; intensity: 3" position="3 4 5"></a-entity>

      <!-- Modelo -->
      <a-entity
        id="modelo"
        gltf-model="url(https://jnrodriguez9.github.io/modelo-ar/navidad.glb)">
      </a-entity>

      <!-- C√°mara -->
      <a-entity camera position="0 0 3" look-controls></a-entity>
    </a-scene>

    <script>
      const modelEntity = document.querySelector('#modelo');
      const loading = document.querySelector('#loading');

      modelEntity.addEventListener('model-loaded', () => {
        loading.style.display = 'none';
        console.log('‚úÖ Modelo cargado correctamente');

        // Esperar un frame para asegurar que el mesh exista
        setTimeout(() => {
          const mesh = modelEntity.getObject3D('mesh');
          if (!mesh) {
            console.error('‚ö†Ô∏è No se encontr√≥ el mesh dentro del modelo');
            return;
          }

          // Calcular tama√±o y centro
          const box = new THREE.Box3().setFromObject(mesh);
          const size = new THREE.Vector3();
          const center = new THREE.Vector3();
          box.getSize(size);
          box.getCenter(center);

          console.log('üì¶ Tama√±o del modelo:', size);
          console.log('üéØ Centro del modelo:', center);

          // Centrar el modelo
          mesh.position.sub(center);

          // Escalarlo autom√°ticamente
          const maxDim = Math.max(size.x, size.y, size.z);
          const scaleFactor = 2 / maxDim;
          mesh.scale.set(scaleFactor, scaleFactor, scaleFactor);

          console.log('üîç Escala aplicada:', scaleFactor);
        }, 500);
      });
    </script>
  </body>
</html>
